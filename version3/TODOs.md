need to better implement safeguards against ref invalidation into vectors - this should be working mainly but still needs better thorough focus and maybe full integration tests

most likely refactor existing const casts

